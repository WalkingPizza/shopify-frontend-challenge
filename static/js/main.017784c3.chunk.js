(this["webpackJsonpshopify-frontend-challenge"]=this["webpackJsonpshopify-frontend-challenge"]||[]).push([[0],{102:function(t,e,n){},223:function(t,e,n){"use strict";n.r(e);var a,i,r,s=n(3),o=n(0),c=n.n(o),u=n(42),h=n.n(u),l=n(232),d=n(124),p=(n(64),n(35)),m=n.n(p),j=n(45),b=n(8),f=n(5),v=n(7),O=n(9),g=n(10),y=(n(102),n(14)),x=n(229),S=n(40),w=n(101),M=n(78),L=n(235),k=n(231),C=function t(e){Object(f.a)(this,t),this.status=void 0,this.movies=void 0,this.error=void 0,this.status="True"===e.Response,this.error=this.status?null:e.Error,this.movies=this.status?e.Search?e.Search.map((function(t){return new V(t)})):[new V(e)]:[]},V=function t(e){Object(f.a)(this,t),this.title=void 0,this.year=void 0,this.poster=void 0,this.imdbID=void 0,this.response=void 0,this.title=e.Title,this.year=e.Year,this.poster=e.Poster,this.imdbID=e.imdbID,this.response="True"===e.Response};!function(t){t.tooManyResults="Too many results.",t.noResults="Movie not found!"}(a||(a={})),function(t){t[t.search=0]="search",t[t.nominations=1]="nominations"}(i||(i={})),function(t){t[t.primary=0]="primary",t[t.secondary=1]="secondary",t[t.destructive=2]="destructive"}(r||(r={}));var I=n(125),N=n(34),A=n(237),D=n(234),R=n(230),T=function(t){Object(O.a)(n,t);var e=Object(g.a)(n);function n(){var t;Object(f.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).renderIMDbButton=function(t){return Object(s.jsx)(y.a,{external:!0,url:"https://imdb.com/title/".concat(t.imdbID),children:"View on IMDb"})},t.renderActionButton=function(e){var n=t.props.type===i.nominations?"Remove":"Nominate",a=t.props.type===i.nominations?r.destructive:r.primary,o=t.props.canEdit(e);return!t.props.readOnly&&Object(s.jsx)(y.a,{primary:a===r.primary,destructive:a===r.destructive,disabled:o,onClick:function(){return t.props.onEdit(e)},children:n})},t.renderMovie=function(e){var n=e.imdbID,a=e.title,i=e.year;return Object(s.jsx)(I.a,{id:n,onClick:function(){},accessibilityLabel:"".concat(a," (").concat(i,")"),name:"".concat(a," (").concat(i,")"),children:Object(s.jsxs)(S.a,{vertical:!0,children:[Object(s.jsx)(S.a,{vertical:!0,children:Object(s.jsxs)(N.a,{variation:"strong",children:[a,Object(s.jsx)(A.a,{children:i})]})}),Object(s.jsxs)(S.a,{distribution:"trailing",children:[t.renderIMDbButton(e),t.renderActionButton(e)]})]})})},t}return Object(v.a)(n,[{key:"render",value:function(){var t=this;return Object(s.jsx)(D.a,{sectioned:this.props.movies.length<=0,title:this.props.title,children:Object(s.jsx)(R.a,{emptyState:this.props.placeholder,loading:this.props.isLoading,items:this.props.movies,renderItem:function(e){return t.renderMovie(e)}})})}}]),n}(c.a.Component);T.defaultProps={readOnly:!1,placeholder:"",onEdit:function(t){},canEdit:function(t){return!1}};var E=n(233),P=n(11),F=n(228),B=function(t){Object(O.a)(n,t);var e=Object(g.a)(n);function n(){return Object(f.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){return Object(s.jsx)(D.a,{sectioned:!0,children:Object(s.jsx)(E.a,{label:"Movie title",placeholder:"Search your movie here",onChange:this.props.onSearchValueChange,value:this.props.searchValue,prefix:Object(s.jsx)(P.a,{source:F.a,color:"inkLighter"})})})}}]),n}(c.a.Component);B.defaultProps={searchValue:""};var J=function(){var t=Object(j.a)(m.a.mark((function t(e){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://www.omdbapi.com/?i=".concat(e,"&apikey=").concat("e0b65314","&type=movie"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",new C(a));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Y=function(){var t=Object(j.a)(m.a.mark((function t(e){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://www.omdbapi.com/?s=".concat(e,"&apikey=").concat("e0b65314","&type=movie"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",new C(a));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(t){Object(O.a)(r,t);var e=Object(g.a)(r);function r(t){var n;return Object(f.a)(this,r),(n=e.call(this,t)).readNominationsFromLocalStorage=function(){return localStorage.getItem("nominations")?JSON.parse(localStorage.getItem("nominations")||""):[]},n.updateLocalStorage=function(){n.state.nominations.length>0?localStorage.setItem("nominations",JSON.stringify(n.state.nominations)):localStorage.clear()},n.handleAddNomination=function(t){var e=Array.from(n.state.nominations);n.setState({nominations:[].concat(Object(b.a)(e),[t])},n.updateLocalStorage)},n.handleRemoveNomination=function(t){var e=Array.from(n.state.nominations);n.setState({nominations:e.filter((function(e){return e.title!==t.title}))},n.updateLocalStorage)},n.checkNominated=function(t){return n.state.nominations.includes(t)},n.handleSearchValueChange=function(){var t=Object(j.a)(m.a.mark((function t(e){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.setState({searchValue:e,isLoading:!0}),e){t.next=4;break}return n.setState({movies:[],isLoading:!1}),t.abrupt("return");case 4:return t.next=6,Y(e);case 6:a=t.sent,n.setState({isLoading:!1,errorMessage:a.error,movies:a.movies});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.clear=function(){n.setState({isLoading:!1,searchValue:"",movies:[],nominations:[],errorMessage:"",shareModalOpen:!1},n.updateLocalStorage)},n.toggleModal=function(){n.setState({shareModalOpen:!n.state.shareModalOpen})},n.state={isLoading:!1,searchValue:"",movies:[],nominations:n.readNominationsFromLocalStorage(),errorMessage:"",shareModalOpen:!1},n}return Object(v.a)(r,[{key:"render",value:function(){var t=this,e=c.a.lazy((function(){return Promise.all([n.e(4),n.e(3)]).then(n.bind(null,239))})),r=Object(s.jsx)(y.a,{primary:!0,disabled:this.state.nominations.length<5,onClick:function(){return t.setState({shareModalOpen:!0})},children:"Share"});return Object(s.jsxs)(x.a,{title:"The Shoppies",primaryAction:Object(s.jsxs)(S.a,{children:[Object(s.jsx)(y.a,{disabled:this.state.nominations.length<=0&&!this.state.searchValue,onClick:this.clear,children:"Clear"}),this.state.nominations.length<5&&Object(s.jsx)(w.a,{content:Object(s.jsxs)(s.Fragment,{children:["Before sharing, you must select your ",Object(s.jsx)("b",{children:"five"})," nominations."]}),children:r}),5===this.state.nominations.length&&r]}),children:[Object(s.jsx)(o.Suspense,{fallback:Object(s.jsx)(M.a,{}),children:Object(s.jsx)(e,{open:this.state.shareModalOpen,nominations:this.state.nominations,toggleModal:this.toggleModal})}),Object(s.jsxs)(L.a,{children:[5===this.state.nominations.length&&Object(s.jsx)(L.a.Section,{children:Object(s.jsx)(k.a,{title:"You did it!",status:"success",onDismiss:function(){},children:Object(s.jsx)("p",{children:"You have successfully picked your five nominations for the Shoppies."})})}),Object(s.jsx)(L.a.Section,{children:Object(s.jsx)(B,{searchValue:this.state.searchValue,onSearchValueChange:this.handleSearchValueChange})}),Object(s.jsx)(L.a.Section,{oneHalf:!0,children:Object(s.jsx)(T,{title:this.state.searchValue?'Results for "'.concat(this.state.searchValue,'"'):"Results",type:i.search,placeholder:this.state.searchValue?this.state.errorMessage===a.noResults?"Couldn't find any movies with that name. Try with another one.":"Too many results found with that name. Try being more specific.":"Use the search bar above to find your favorite movies and nominate them.",errorMessage:this.state.errorMessage,isLoading:this.state.isLoading,movies:this.state.movies,onEdit:this.handleAddNomination,canEdit:this.state.nominations.length<5?this.checkNominated:function(){return!0}})}),Object(s.jsx)(L.a.Section,{oneHalf:!0,children:Object(s.jsx)(T,{title:"Nominations",type:i.nominations,placeholder:"You haven't nominated any movies yet.",isLoading:this.state.isLoading,movies:this.state.nominations,onEdit:this.handleRemoveNomination})})]})]})}}]),r}(c.a.Component),q=function(t){t&&t instanceof Function&&n.e(5).then(n.bind(null,240)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,r=e.getLCP,s=e.getTTFB;n(t),a(t),i(t),r(t),s(t)}))},z=n(122),U=n(15),G=function(t){Object(O.a)(n,t);var e=Object(g.a)(n);function n(t){var a;Object(f.a)(this,n),(a=e.call(this,t)).getMovies=function(){return a.props.match.params.nominations.split(",").map(function(){var t=Object(j.a)(m.a.mark((function t(e){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J(e);case 2:return n=t.sent,t.abrupt("return",n.movies[0]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},a.state={isLoading:!0,movies:[]};var i=a.getMovies();return Promise.all(i).then((function(t){a.setState({isLoading:!1,movies:t.filter((function(t){return t&&t.response}))})})),a}return Object(v.a)(n,[{key:"render",value:function(){var t=this;return Object(s.jsx)(x.a,{breadcrumbs:[{content:"Create your own list",onAction:function(){return t.props.history.push("/")}}],primaryAction:Object(s.jsx)(y.a,{primary:!0,onClick:function(){return window.print()},children:"Print"}),children:Object(s.jsx)(L.a,{children:Object(s.jsx)(L.a.Section,{children:Object(s.jsx)(T,{title:"Nominations",type:i.nominations,readOnly:!0,isLoading:this.state.isLoading,movies:this.state.movies})})})})}}]),n}(c.a.Component);h.a.render(Object(s.jsx)(z.a,{children:Object(s.jsxs)(l.a,{i18n:d,children:[Object(s.jsx)(U.a,{exact:!0,path:"/",component:H}),Object(s.jsx)(U.a,{path:"/list/:nominations",component:G})]})}),document.querySelector("#root")),q()}},[[223,1,2]]]);
//# sourceMappingURL=main.017784c3.chunk.js.map